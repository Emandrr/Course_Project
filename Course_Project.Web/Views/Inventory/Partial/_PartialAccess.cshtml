
<link rel="stylesheet" href="~/css/admin.css" />
<form method="post">
    <input type="hidden" name="id" value="@Model.inventory.PublicId" />
    <nav class="nav navbar d-flex justify-content-between align-items-center">
        <div class="nav-item">
            @if (!Model.inventory.IsPublic)
            {
                <button type="submit" class="btn btn-sm btn-danger" asp-action="MakePublic" asp-controller="Inventory" >
                    <i class="fas fa-ban me-1"></i>Make inventory public
                </button>
            }
            else
            {
                <button type="submit" class="btn btn-sm btn-danger" asp-action="MakePrivate" asp-controller="Inventory">
                    <i class="fas fa-ban me-1"></i>Make inventory private
                </button>
            }
            <button type="submit" class="btn btn-sm btn-danger" asp-action="GiveAccess" asp-controller="Inventory">
                <i class="fas fa-ban me-1"></i>Give access to inventory
            </button>
            <button type="submit" class="btn btn-sm btn-success" asp-action="TakeAccess" asp-controller="Inventory" >
                <i class="fas fa-unlock-alt me-1"></i>Take access to inventory
            </button>
        </div>
    </nav>

    <table class="table table-striped table-bordered user-table">
        <thead>
            <tr>
                <th scope="col">
                    <input type="checkbox" id="selectDeselect" />
                </th>
                <th scope="col">Name</th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                if (!User.IsInRole("Admin") && Model.inventory.User.UserName!=user.UserName){
                <tr data-id="@user.UserName">
                    <td>
                        <input type="checkbox" id="@user.Id" name="UserId" value="@user.Id" class="checkboxtable" />
                    </td>
                    <td>@user.Login</td>
                    <td>
                        @if (Model.UserAccess.Contains(user.Id))
                        {
                            <span class="status-blocked">Has access</span>
                        }
                        else
                        {
                            <span class="status-active">No access</span>
                        }
                    </td>
                </tr>
                }
            }
        </tbody>
    </table>
</form>

<script>
    document.getElementById('selectDeselect').addEventListener('change', function() {
        const checkboxes = document.querySelectorAll('.checkboxtable');
        checkboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
        });
    });
</script>