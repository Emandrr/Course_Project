@{
    string GetTheme()
    {
        var theme = Context.Request.Cookies["theme"];
        return string.IsNullOrWhiteSpace(theme) ? "light" : theme.ToLower();
    }
}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('themeToggle');
        const currentTheme = "@GetTheme()";
        ClearAndSet(currentTheme);

        SetIcon(currentTheme);
        themeToggle.addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-bs-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            ClearAndSet(newTheme);

            SetIcon(newTheme);
        });
        function SetIcon(theme)
        {
           theme==='light'?document.querySelector('.bi-sun-fill').style.display = 'inline-block':document.querySelector('.bi-moon-fill').style.display = 'inline-block';
        }
        function ClearAndSet(theme)
        {
            document.documentElement.setAttribute('data-bs-theme', theme);
            document.cookie = `theme=${theme}; path=/; max-age=${60*60*24*365}; SameSite=Lax`;
            document.querySelectorAll('#themeToggle i').forEach(icon => {
                icon.style.display = 'none';
            });
        }
    });
</script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">